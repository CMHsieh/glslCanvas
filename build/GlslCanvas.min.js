!function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var g=r[a]={exports:{}};t[a][0].call(g.exports,function(e){var r=t[a][1][e];return n(r?r:e)},g,g.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("./tools"),a=e("./gl");window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return window.setTimeout(e,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.clearTimeout}();var s={x:0,y:0};document.addEventListener("mousemove",function(e){s.x=e.clientX||e.pageX,s.y=e.clientY||e.pageY},!1);var u=function(){function e(t){i(this,e),this.canvas=t,this.isValid=!1;var r=a.setupWebGL(t);if(r){this.gl=r,this.timeLoad=Date.now();var n="";if(t.hasAttribute("data-fragment"))n=t.getAttribute("data-fragment");else{if(!t.hasAttribute("data-fragment-url"))return void console.log("No data");var s=t.getAttribute("data-fragment-url");n=o.fetchHTTP(s)}if(this.load(n),this.program){if(this.vbo=[],this.program){var u=void 0,l=r.getAttribLocation(this.program,"a_texcoord");u=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),this.vbo.push(u);var g=void 0,h=r.getAttribLocation(this.program,"a_position");g=r.createBuffer(),this.gl.bindBuffer(r.ARRAY_BUFFER,g),this.gl.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(h),r.vertexAttribPointer(h,2,r.FLOAT,!1,0,0),this.vbo.push(g)}this.textures=[];var c=t.hasAttribute("data-textures");if(c){var d=t.getAttribute("data-textures").split(",");for(var f in d)console.log("Loading texture: "+d[f]),this.textures.push(r.createTexture()),r.bindTexture(r.TEXTURE_2D,this.textures[f]),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,0,255])),this.textures[f].image=new Image,this.textures[f].image.onload=function(e,t){return function(){a.loadTexture(e.gl,t),e.render({forceRender:!0})}}(this,this.textures[f]),this.textures[f].image.src=d[f]}this.render({mouse:{x:0,y:0},forceRender:!0})}}}return n(e,[{key:"load",value:function(e,t){t||(t="\nprecision mediump float;\nuniform vec2 u_resolution;\nuniform float u_time;\nattribute vec2 a_position;\nattribute vec2 a_texcoord;\nvarying vec2 v_texcoord;\nvoid main() {\n 	gl_Position = vec4(a_position, 0.0, 1.0);\n 	v_texcoord = a_texcoord;\n }"),e||(e+="\nuniform vec2 u_resolution;\nuniform float u_time;\nvarying vec2 v_texcoord;\nvoid main(){\n	vec2 st = gl_FragCoord.xy/u_resolution;\n	gl_FragColor = vec4(st.x,st.y,abs(sin(u_time)),1.0);\n}"),this.vertexString=t,this.fragmentString=e,this.animated=!1;var r=(e.match(/u_time/g)||[]).length,i=(e.match(/u_mouse/g)||[]).length;this.animated=r>1||i>1;var n=a.createShader(this.gl,t,this.gl.VERTEX_SHADER),o=a.createShader(this.gl,e,this.gl.FRAGMENT_SHADER);o?this.isValid=!0:(o=a.createShader(this.gl,"void main(){\n	gl_FragColor = vec4(1.0);\n}",this.gl.FRAGMENT_SHADER),this.isValid=!1);var s=a.createProgram(this.gl,[n,o]);this.gl.useProgram(s),this.gl.detachShader(s,n),this.gl.detachShader(s,o),this.gl.deleteShader(n),this.gl.deleteShader(o),this.program=s,this.vbo&&this.render({mouse:{x:0,y:0},forceRender:!0})}},{key:"render",value:function(e){var t=e.forceRender,r=e.mouse;if(t||this.animated&&o.isCanvasVisible(this.canvas)){var i=Date.now(),n=(i-this.timeLoad)/1e3,a=this.gl.getUniformLocation(this.program,"u_time");this.gl.uniform1f(a,n);var s=this.canvas.getBoundingClientRect();if(r&&r.x>=s.left&&r.x<=s.right&&r.y>=s.top&&r.y<=s.bottom){var u=this.gl.getUniformLocation(this.program,"u_mouse");this.gl.uniform2f(u,r.x-s.left,this.canvas.height-(r.y-s.top))}var l=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform2f(l,this.canvas.width,this.canvas.height);for(var g=0;g<this.textures.length;++g)this.gl.uniform1i(this.gl.getUniformLocation(this.program,"u_tex"+g),g),this.gl.uniform2f(this.gl.getUniformLocation(this.program,"u_tex"+g+"Resolution"),this.textures[g].image.width,this.textures[g].image.height),this.gl.activeTexture(this.gl.TEXTURE0+g),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[g]);this.gl.drawArrays(this.gl.TRIANGLES,0,6)}}},{key:"start",value:function(){this.render({mouse:s}),window.requestAnimFrame(this.start())}},{key:"version",value:function(){return"0.0.1"}}]),e}();r["default"]=u,window.GlslCanvas=u,t.exports=r["default"]},{"./gl":2,"./tools":3}],2:[function(e,t,r){"use strict";function i(e,t){e.bindTexture(e.TEXTURE_2D,t),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.image),u.isPowerOf2(t.image.width)&&u.isPowerOf2(t.image.height)?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),e.bindTexture(e.TEXTURE_2D,null)}function n(e,t){function r(t){var r=e.parentNode;r&&(r.innerHTML=g(t))}if(!window.WebGLRenderingContext)return r(h),null;var i=o(e,t);return i||r(c),i.getExtension("OES_standard_derivatives"),i}function o(e,t){for(var r=["webgl","experimental-webgl"],i=null,n=0;n<r.length;++n){try{i=e.getContext(r[n],t)}catch(o){}if(i)break}return i}function a(e,t,r){var i=e.createShader(r);e.shaderSource(i,t),e.compileShader(i);var n=e.getShaderParameter(i,e.COMPILE_STATUS);return n?i:(l=e.getShaderInfoLog(i),console.error("*** Error compiling shader '"+i+"':"+l),e.deleteShader(i),null)}function s(e,t,r,i){for(var n=e.createProgram(),o=0;o<t.length;++o)e.attachShader(n,t[o]);if(r)for(var o=0;o<r.length;++o)e.bindAttribLocation(n,i?i[o]:o,r[o]);e.linkProgram(n);var a=e.getProgramParameter(n,e.LINK_STATUS);return a?n:(l=e.getProgramInfoLog(n),console.log("Error in program linking:"+l),e.deleteProgram(n),null)}Object.defineProperty(r,"__esModule",{value:!0}),r.loadTexture=i,r.setupWebGL=n,r.create3DContext=o,r.createShader=a,r.createProgram=s;var u=e("./tools"),l="",g=function(e){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>"},h='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},{"./tools":3}],3:[function(e,t,r){"use strict";function i(e){return e.getBoundingClientRect().top+e.height>0&&e.getBoundingClientRect().top<(window.innerHeight||document.documentElement.clientHeight)}function n(e){return 0==(e&e-1)}function o(e){--e;for(var t=1;32>t;t<<=1)e|=e>>t;return e+1}function a(e,t){var r,i=new XMLHttpRequest;return i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(r=i.responseText)},i.open(t?t:"GET",e,!1),i.overrideMimeType("text/plain"),i.send(),r}function s(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r}function u(e,t){var r=e.getBoundingClientRect();return{x:t.clientX-r.left,y:t.clientY-r.top}}Object.defineProperty(r,"__esModule",{value:!0}),r.isCanvasVisible=i,r.isPowerOf2=n,r.nextHighestPowerOfTwo=o,r.fetchHTTP=a,r.FormatNumberLength=s,r.getMousePos=u},{}]},{},[1]);
//# sourceMappingURL=GlslCanvas.min.js.map