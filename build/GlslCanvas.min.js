!function t(e,r,i){function n(o,s){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var g=r[o]={exports:{}};e[o][0].call(g.exports,function(t){var r=e[o][1][t];return n(r?r:t)},g,g.exports,t,e,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),a=t("./tools"),o=t("./gl"),s=function(){function t(e){i(this,t),this.canvas=e,this.isValid=!1;var r=o.setupWebGL(e);if(r){this.gl=r,this.timeLoad=Date.now();var n="";if(e.hasAttribute("data-fragment"))n=e.getAttribute("data-fragment");else{if(!e.hasAttribute("data-fragment-url"))return void console.log("No data");var s=e.getAttribute("data-fragment-url");n=a.fetchHTTP(s)}if(this.load(n),this.program){if(this.vbo=[],this.program){var u=void 0,l=r.getAttribLocation(this.program,"a_texcoord");u=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),this.vbo.push(u);var g=void 0,h=r.getAttribLocation(this.program,"a_position");g=r.createBuffer(),this.gl.bindBuffer(r.ARRAY_BUFFER,g),this.gl.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(h),r.vertexAttribPointer(h,2,r.FLOAT,!1,0,0),this.vbo.push(g)}this.textures=[];var c=e.hasAttribute("data-textures");if(c){var f=e.getAttribute("data-textures").split(",");for(var d in f)this.setTexture("u_tex"+d,f[d])}this.setMouse({x:0,y:0}),this.render(!0)}}}return n(t,[{key:"load",value:function(t,e){e||(e="\nprecision mediump float;\nuniform vec2 u_resolution;\nuniform float u_time;\nattribute vec2 a_position;\nattribute vec2 a_texcoord;\nvarying vec2 v_texcoord;\nvoid main() {\n 	gl_Position = vec4(a_position, 0.0, 1.0);\n 	v_texcoord = a_texcoord;\n }"),t||(t+="\nuniform vec2 u_resolution;\nuniform float u_time;\nvarying vec2 v_texcoord;\nvoid main(){\n	vec2 st = gl_FragCoord.xy/u_resolution;\n	gl_FragColor = vec4(st.x,st.y,abs(sin(u_time)),1.0);\n}"),this.vertexString=e,this.fragmentString=t,this.animated=!1;var r=(t.match(/u_time/g)||[]).length,i=(t.match(/u_mouse/g)||[]).length;this.animated=r>1||i>1;var n=o.createShader(this.gl,e,this.gl.VERTEX_SHADER),a=o.createShader(this.gl,t,this.gl.FRAGMENT_SHADER);a?this.isValid=!0:(a=o.createShader(this.gl,"void main(){\n	gl_FragColor = vec4(1.0);\n}",this.gl.FRAGMENT_SHADER),this.isValid=!1);var s=o.createProgram(this.gl,[n,a]);this.gl.useProgram(s),this.gl.deleteShader(n),this.gl.deleteShader(a),this.program=s,this.vbo&&this.render(!0)}},{key:"render",value:function(t){if(void 0!==t&&t||this.animated&&a.isCanvasVisible(this.canvas)){var e=Date.now(),r=(e-this.timeLoad)/1e3,i=this.gl.getUniformLocation(this.program,"u_time");this.gl.uniform1f(i,r);var n=this.gl.getUniformLocation(this.program,"u_resolution");this.gl.uniform2f(n,this.canvas.width,this.canvas.height);for(var o=0;o<this.textures.length;++o)this.gl.uniform1i(this.gl.getUniformLocation(this.program,this.textures[o].name),o),this.gl.uniform2f(this.gl.getUniformLocation(this.program,this.textures[o].name+"Resolution"),this.textures[o].image.width,this.textures[o].image.height),this.gl.activeTexture(this.gl.TEXTURE0+o),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o]);this.gl.drawArrays(this.gl.TRIANGLES,0,6)}}},{key:"setMouse",value:function(t){var e=this.canvas.getBoundingClientRect();t&&t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom&&this.gl.uniform2f(this.gl.getUniformLocation(this.program,"u_mouse"),t.x-e.left,this.canvas.height-(t.y-e.top))}},{key:"setUniform",value:function(t,e){}},{key:"setTexture",value:function(t,e){var r=this.gl.createTexture();this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([255,255,0,255])),r.image=new Image,r.image.onload=function(t,e){return function(){o.loadTexture(t.gl,e),t.render(!0)}}(this,r),r.name=t,r.image.src=e,this.textures.push(r)}},{key:"version",value:function(){return"0.0.1"}}]),t}();r["default"]=s,window.GlslCanvas=s,e.exports=r["default"]},{"./gl":2,"./tools":3}],2:[function(t,e,r){"use strict";function i(t,e){t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.image),u.isPowerOf2(e.image.width)&&u.isPowerOf2(e.image.height)?(t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)),t.bindTexture(t.TEXTURE_2D,null)}function n(t,e){function r(e){var r=t.parentNode;r&&(r.innerHTML=g(e))}if(!window.WebGLRenderingContext)return r(h),null;var i=a(t,e);return i||r(c),i.getExtension("OES_standard_derivatives"),i}function a(t,e){for(var r=["webgl","experimental-webgl"],i=null,n=0;n<r.length;++n){try{i=t.getContext(r[n],e)}catch(a){}if(i)break}return i}function o(t,e,r){var i=t.createShader(r);t.shaderSource(i,e),t.compileShader(i);var n=t.getShaderParameter(i,t.COMPILE_STATUS);return n?i:(l=t.getShaderInfoLog(i),console.error("*** Error compiling shader '"+i+"':"+l),t.deleteShader(i),null)}function s(t,e,r,i){for(var n=t.createProgram(),a=0;a<e.length;++a)t.attachShader(n,e[a]);if(r)for(var a=0;a<r.length;++a)t.bindAttribLocation(n,i?i[a]:a,r[a]);t.linkProgram(n);var o=t.getProgramParameter(n,t.LINK_STATUS);return o?n:(l=t.getProgramInfoLog(n),console.log("Error in program linking:"+l),t.deleteProgram(n),null)}Object.defineProperty(r,"__esModule",{value:!0}),r.loadTexture=i,r.setupWebGL=n,r.create3DContext=a,r.createShader=o,r.createProgram=s;var u=t("./tools"),l="",g=function(t){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>"},h='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',c='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},{"./tools":3}],3:[function(t,e,r){"use strict";function i(t){return t.getBoundingClientRect().top+t.height>0&&t.getBoundingClientRect().top<(window.innerHeight||document.documentElement.clientHeight)}function n(t){return 0==(t&t-1)}function a(t){--t;for(var e=1;32>e;e<<=1)t|=t>>e;return t+1}function o(t,e){var r,i=new XMLHttpRequest;return i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(r=i.responseText)},i.open(e?e:"GET",t,!1),i.overrideMimeType("text/plain"),i.send(),r}function s(t,e){for(var r=""+t;r.length<e;)r="0"+r;return r}function u(t,e){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}Object.defineProperty(r,"__esModule",{value:!0}),r.isCanvasVisible=i,r.isPowerOf2=n,r.nextHighestPowerOfTwo=a,r.fetchHTTP=o,r.FormatNumberLength=s,r.getMousePos=u},{}]},{},[1]);
//# sourceMappingURL=GlslCanvas.min.js.map